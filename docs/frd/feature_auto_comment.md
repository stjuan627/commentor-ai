# Feature Request Document: Auto Comment Generation

## 1. Requirement Description

Develop a browser extension using the `wxt` framework. The primary function of this extension is to read the main content of the currently active webpage, send this content to a configured Large Language Model (LLM) API, and retrieve a relevant comment generated by the LLM. The goal is to provide users with a quick way to generate draft comments for online discussions, forums, or article comment sections.

## 2. TODO List

-   [x] **Project Setup:** Initialize a new `wxt` project or configure the existing one for this feature.
-   [x] **Content Extraction:** Implement content extraction as defined in [`feature_content_extraction.md`](./feature_content_extraction.md).
-   [ ] **LLM Integration:**
    -   [x] Implement a background script or service worker (`background/`) to manage communication with the LLM API.
    -   [ ] Choose an LLM API provider (e.g., OpenAI, Google Gemini, Anthropic Claude, or a self-hosted model).
    -   [ ] Implement the logic to securely send the extracted content to the LLM API and receive the generated comment.
    -   [x] Implement secure handling of API keys (e.g., storing in extension storage, requiring user input).
-   [x] **User Interface (UI):**
    -   [x] Design and implement a user interface element (e.g., a popup via `popup/`, or potentially a sidebar) to:
        -   [x] Trigger the comment generation process.
        -   [x] Display the generated comment to the user.
        -   [x] Show loading/error states.
-   [x] **Comment Insertion (Optional):**
    -   [x] Investigate and potentially implement functionality to automatically insert or copy the generated comment into the target comment input field on the webpage. This might require additional content script logic.
-   [x] **Configuration:**
    -   [x] Create an options page (`options/`) or use the popup UI for users to configure settings, primarily the LLM API key and potentially endpoint/model selection.
-   [x] **Error Handling:**
    -   [x] Implement robust error handling for potential issues like:
        -   [x] Failure to extract content.
        -   [x] LLM API errors (e.g., network issues, invalid key, rate limits).
        -   [x] Unexpected responses.
-   [ ] **Packaging & Testing:**
    -   [ ] Test the extension across different websites.
    -   [ ] Prepare the extension for packaging (`wxt build`).
